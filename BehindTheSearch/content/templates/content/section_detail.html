{% extends 'base.html' %} {% load static %} {% block title %}{{ section.title }}
- Behind The Search{% endblock %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/content/sections.css' %}" />
{% endblock %} {% block content %}
<div class="section-detail-container">
  <div class="section-detail-header">
    <div class="section-title-area">
      <h1>{{ section.title }}</h1>
      <p class="section-description">{{ section.description }}</p>
    </div>

    {% if user.is_superuser %}
    <div class="section-actions">
      <a href="{% url 'edit_section' section.id %}" class="btn-edit">
        <i class="fas fa-edit"></i> Edit
      </a>
      <button type="button" id="deleteButton" class="btn-delete">
        <i class="fas fa-trash-alt"></i> Delete
      </button>
    </div>
    {% endif %}
  </div>

  <div class="videos-container">
    <div class="videos-header">
      <h2><i class="fas fa-video"></i> Videos in this Section</h2>
    </div>

    {% if videos %}
    <ul class="videos-list">
      {% for video in videos %}
      <li class="video-item">
        <div class="lesson-number">{{ video.lesson_number }}</div>
        <div class="video-info">
          <a href="{% url 'video_detail' video.id %}" class="video-title"
            >{{ video.title }}</a
          >
          <div class="video-meta">
            <div class="video-status">
              {% if video.mark_as_watched %}
              <i class="fas fa-check-circle" style="color: var(--Success)"></i>
              <span>Watched</span>
              {% else %}
              <i class="far fa-circle" style="color: var(--Text-Secondary)"></i>
              <span>Unwatched</span>
              {% endif %}
            </div>

            {% if user.is_superuser %}
            <a
              href="{% url 'edit_course_video' video.id %}"
              style="color: var(--Text-Secondary); text-decoration: none"
            >
              <i class="fas fa-edit"></i> Edit
            </a>
            {% endif %}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <div class="empty-videos">
      <p>No videos in this section yet.</p>
      {% if user.is_superuser %}
      <a
        href="{% url 'create_course_video' %}"
        class="create-section-btn"
        style="margin-top: 1rem"
      >
        <i class="fas fa-plus"></i> Add Video
      </a>
      {% endif %}
    </div>
    {% endif %}
  </div>

  <div class="back-navigation">
    <a href="{% url 'sections_list' %}" class="back-link">
      <i class="fas fa-arrow-left"></i> Back to Sections
    </a>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <i class="fas fa-exclamation-triangle"></i>
      <h3>Confirm Deletion</h3>
    </div>
    <div class="modal-content">
      <p>
        Are you sure you want to delete the section
        <strong>"{{ section.title }}"</strong>?
      </p>
      <p>This will remove all videos in this section and cannot be undone.</p>
    </div>
    <div class="modal-actions">
      <button id="cancelDelete" class="cancel-button">Cancel</button>
      <a
        href="{% url 'delete_section' section.id %}"
        class="delete-confirm-button"
      >
        <i class="fas fa-trash-alt"></i> Delete
      </a>
    </div>
  </div>
</div>

{% endblock %} {% block extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Delete confirmation modal functionality
    const deleteButton = document.getElementById("deleteButton");
    const deleteModal = document.getElementById("deleteModal");
    const cancelDelete = document.getElementById("cancelDelete");

    if (deleteButton && deleteModal && cancelDelete) {
      // Show the modal when delete button is clicked
      deleteButton.addEventListener("click", function () {
        deleteModal.classList.add("active");
      });

      // Hide the modal when cancel is clicked
      cancelDelete.addEventListener("click", function () {
        deleteModal.classList.remove("active");
      });

      // Close modal when clicking outside
      deleteModal.addEventListener("click", function (e) {
        if (e.target === deleteModal) {
          deleteModal.classList.remove("active");
        }
      });
    }
  });
</script>
{% endblock %}

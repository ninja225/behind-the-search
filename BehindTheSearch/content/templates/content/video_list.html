{% extends 'base.html' %}
{% load static %}

{% block title %}Course Videos - Behind The Search{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/content/videos-list.css' %}" />
{% endblock %}

{% block content %}
<div class="video-course-container">
  <!-- Sidebar with video list -->
  <aside class="video-course-sidebar">
    <div class="video-sidebar-header">
      <h3>Course Content</h3>
      
      <!-- Course Progress Bar -->
      <div class="course-progress-container">
        <div class="course-progress-bar">
          <div class="course-progress-fill" id="courseProgressFill"></div>
        </div>
        <div class="course-progress-text">
          <span id="courseProgressText">0/0 completed</span>
          <span id="courseProgressPercentage">0%</span>
        </div>
      </div>
      
      <form class="video-search-form" method="get">
        <div class="video-search-input-container">
          <input type="text" name="search" placeholder="Search lessons..." value="{{ query }}" />
          <button type="submit" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </form>
    </div>

    <div class="video-lesson-list">
      {% for video in videos %}
      <a href="{% url 'video_detail' video.id %}" 
         class="video-lesson-item {% if current_video and current_video.id == video.id %}active{% endif %}"
         data-video-id="{{ video.id }}"
         data-completed="{% if video.mark_as_watched %}true{% else %}false{% endif %}">
        <div class="video-lesson-number">{{ video.lesson_number }}</div>
        <div class="video-lesson-info">
          <h4 class="video-lesson-title">{{ video.title }}</h4>
          <div class="video-lesson-meta">
            {% if video.mark_as_watched %}
            <span class="video-lesson-status completed">
              <i class="fas fa-check-circle"></i> Completed
            </span>
            {% else %}
            <span class="video-lesson-status pending">
              <i class="fas fa-circle"></i> Not started
            </span>
            {% endif %}
          </div>
        </div>
      </a>
      {% empty %}
      <div class="video-no-lessons">
        <i class="fas fa-video-slash"></i>
        <p>No videos found.</p>
      </div>
      {% endfor %}
    </div>
  </aside>

  <!-- Main content area -->
  <main class="video-course-content">
    <div class="video-welcome-screen">
      <img src="{% static 'imgs/logo-trans.png' %}" alt="Course Logo" class="video-welcome-logo" />
      <h1>Welcome to Behind The Search</h1>
      <p>Select a lesson from the sidebar to begin learning.</p>
      {% if videos %}
      <a href="{% url 'video_detail' videos.0.id %}" class="video-start-course-btn">
        <i class="fas fa-play-circle"></i> Start First Lesson
      </a>
      {% endif %}
    </div>
  </main>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/content/videos-list.js' %}"></script>
{% endblock %}
